<!--
LECCIÓN HTML AUTOCONTENIDA (Moodle iframe)
- Sin dependencias externas.
- Interactividad por JS inline y CSS.
- Ejercicios autocorregibles.
-->

<div class="ele-lesson" role="region" aria-label="[B2] Pretérito indefinido: La Movida madrileña">
  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --ink:#0f172a;
      --muted:#475569;
      --line:#e2e8f0;
      --brand:#7c3aed;
      --brand-2:#0ea5e9;
      --accent:#f97316;
      --success:#16a34a;
      --danger:#ef4444;
      --shadow:0 18px 38px rgba(15,23,42,.08);
      --radius:18px;
    }
    .ele-lesson{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; color:var(--ink); background:var(--bg); max-width:1200px; margin:0 auto; line-height:1.4;}
    .ele-lesson *{box-sizing:border-box;}
    .ele-lesson h1,.ele-lesson h2,.ele-lesson h3{margin:0 0 .6rem 0; line-height:1.2;}
    .ele-lesson p{margin:.45rem 0;}
    .ele-lesson ul{margin:.5rem 0; padding-left:1.2rem;}
    .ele-lesson a{color:inherit;}

    .hero{
      border:1px solid var(--line);
      border-radius:24px;
      background:linear-gradient(120deg,#ede9fe 0%, #e0f2fe 55%, #fff7ed 100%);
      padding:22px 22px 18px;
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero::after{
      content:"";
      position:absolute;
      right:-120px; top:-120px;
      width:240px; height:240px;
      border-radius:999px;
      background:radial-gradient(circle at center, rgba(124,58,237,.35), transparent 70%);
    }
    .badge-row{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;}
    .badge{font-size:12px; padding:6px 10px; border-radius:999px; background:#fff; border:1px solid var(--line);}

    .grid{display:grid; grid-template-columns:1.15fr .85fr; gap:16px; margin-top:18px;}
    @media (max-width: 980px){.grid{grid-template-columns:1fr;}}

    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden;}
    .card-h{padding:14px 16px; border-bottom:1px solid var(--line); display:flex; align-items:center; justify-content:space-between; gap:10px;}
    .card-h h3{font-size:15px;}
    .card-b{padding:14px 16px;}

    .pill{font-size:12px; padding:6px 10px; border-radius:999px; background:#fff; border:1px solid var(--line); color:var(--muted);}
    .note{background:#f1f5f9; border:1px solid var(--line); padding:12px 14px; border-radius:14px; color:var(--ink); font-size:14px;}
    .note b{display:block; margin-bottom:4px;}

    .timeline{display:grid; gap:10px;}
    .timeline-item{display:grid; grid-template-columns:80px 1fr; gap:12px; padding:10px 12px; border:1px dashed #cbd5e1; border-radius:14px; background:#fff;}
    .timeline-item span{font-weight:700; color:var(--brand);}

    .chip-row{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px;}
    .chip{font-size:12px; padding:7px 10px; border-radius:12px; background:#f8fafc; border:1px solid var(--line);}

    .exercise{margin-top:14px; padding:12px; border-radius:16px; border:1px solid var(--line); background:#fff;}
    .exercise b{display:block; margin-bottom:8px;}
    .exercise small{color:var(--muted);}

    .input, select{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      font-size:14px;
      background:#fff;
    }
    .input:focus, select:focus{outline:none; border-color:#93c5fd; box-shadow:0 0 0 4px rgba(59,130,246,.12);}    

    .btn-row{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;}
    .btn{
      padding:10px 14px;
      border-radius:12px;
      border:1px solid var(--line);
      background:var(--ink);
      color:#fff;
      font-size:13px;
      cursor:pointer;
    }
    .btn.secondary{background:#fff; color:var(--ink);}
    .btn.ghost{background:#f8fafc; color:var(--ink);}

    .feedback{margin-top:10px; font-size:13px;}
    .ok{color:var(--success); font-weight:700;}
    .bad{color:var(--danger); font-weight:700;}

    .match-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
    @media (max-width: 820px){.match-grid{grid-template-columns:1fr;}}

    .options{display:grid; gap:8px;}
    .option{display:flex; align-items:center; gap:8px; padding:10px; border:1px solid var(--line); border-radius:12px; background:#fff;}

    .story{background:linear-gradient(180deg,#ffffff,#f8fafc); border:1px solid var(--line); border-radius:16px; padding:14px;}
    .story mark{background:#fef3c7; padding:0 .25rem; border-radius:6px;}

    .score-box{display:flex; align-items:center; gap:12px; padding:10px 12px; border-radius:14px; background:#ecfeff; border:1px solid #a5f3fc;}

    .footer{margin:18px 0 6px; color:var(--muted); font-size:12px; text-align:center;}

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}
  </style>

  <section class="hero" aria-label="Introducción">
    <h1>[B2] Pretérito indefinido en contexto: <span style="color:var(--brand)">La Movida madrileña</span></h1>
    <p>Revive los años 80 en Madrid: música, libertad y cultura urbana. Aprenderás a narrar hechos completos en pasado con el <b>pretérito indefinido</b>.</p>
    <div class="badge-row">
      <span class="badge">Nivel B2</span>
      <span class="badge">Narración histórica</span>
      <span class="badge">Gramática + cultura</span>
    </div>
  </section>

  <section class="grid" aria-label="Teoría y cultura">
    <article class="card">
      <div class="card-h">
        <h3>Teoría esencial: ¿cuándo usamos el pretérito indefinido?</h3>
        <span class="pill">Resumen rápido</span>
      </div>
      <div class="card-b">
        <div class="note">
          <b>Idea clave</b>
          <p>El pretérito indefinido describe <b>acciones completas y puntuales</b> en un momento concreto del pasado: <i>ayer, en 1985, la semana pasada…</i></p>
        </div>
        <ul>
          <li>Marca el inicio o fin de una acción: <b>empezó</b>, <b>terminó</b>.</li>
          <li>Se usa en narraciones históricas o biográficas.</li>
          <li>Palabras típicas: <b>ayer</b>, <b>en 1983</b>, <b>entonces</b>, <b>de repente</b>.</li>
        </ul>
        <div class="chip-row">
          <span class="chip">fue</span>
          <span class="chip">tuvo</span>
          <span class="chip">salió</span>
          <span class="chip">estrenaron</span>
          <span class="chip">apareció</span>
          <span class="chip">cambió</span>
        </div>
      </div>
    </article>

    <aside class="card">
      <div class="card-h">
        <h3>Contexto cultural: La Movida madrileña</h3>
        <span class="pill">España 1980s</span>
      </div>
      <div class="card-b">
        <div class="timeline">
          <div class="timeline-item"><span>1979</span><div>Se abren espacios culturales y nacen nuevas bandas.</div></div>
          <div class="timeline-item"><span>1981</span><div>Surgen revistas alternativas y crece la escena underground.</div></div>
          <div class="timeline-item"><span>1984</span><div>Almodóvar filma películas icónicas; se consolida la estética de la Movida.</div></div>
          <div class="timeline-item"><span>1986</span><div>Madrid acoge conciertos masivos y la cultura pop se internacionaliza.</div></div>
        </div>
        <p class="note" style="margin-top:12px;">Usa estos hechos para narrar en pasado y practicar el indefinido.</p>
      </div>
    </aside>
  </section>

  <section class="grid" aria-label="Ejercicios autocorregibles">
    <article class="card">
      <div class="card-h">
        <h3>Ejercicio 1 · Selección múltiple (formas verbales)</h3>
        <span class="pill">Autocorregible</span>
      </div>
      <div class="card-b">
        <div class="exercise" data-ex="mcq">
          <b>Elige la forma correcta</b>
          <p>En 1984, Pedro Almodóvar <select class="input" data-answer="estrenó">
            <option value="">— elige —</option>
            <option>estrenaba</option>
            <option>estrenó</option>
            <option>estrenará</option>
          </select> <span class="sr-only">verbo 1</span> una película que marcó una época.</p>

          <p>La escena nocturna <select class="input" data-answer="creció">
            <option value="">— elige —</option>
            <option>crecía</option>
            <option>creció</option>
            <option>crecerá</option>
          </select> <span class="sr-only">verbo 2</span> gracias a los nuevos locales de música.</p>

          <p>Los jóvenes <select class="input" data-answer="rompieron">
            <option value="">— elige —</option>
            <option>rompen</option>
            <option>rompieron</option>
            <option>rompían</option>
          </select> <span class="sr-only">verbo 3</span> con las normas tradicionales.</p>

          <div class="btn-row">
            <button class="btn" data-action="check">Comprobar</button>
            <button class="btn secondary" data-action="reset">Reiniciar</button>
          </div>
          <div class="feedback" aria-live="polite"></div>
        </div>
      </div>
    </article>

    <article class="card">
      <div class="card-h">
        <h3>Ejercicio 2 · Completa con indefinido</h3>
        <span class="pill">Autocorregible</span>
      </div>
      <div class="card-b">
        <div class="exercise" data-ex="fill">
          <b>Completa las frases</b>
          <p>1) En 1981 la prensa alternativa <input class="input" data-answer="apareció" placeholder="verbo" aria-label="Respuesta 1"></p>
          <p>2) En esa década, la estética urbana <input class="input" data-answer="cambió" placeholder="verbo" aria-label="Respuesta 2"></p>
          <p>3) Muchos artistas <input class="input" data-answer="tuvieron" placeholder="verbo" aria-label="Respuesta 3"> éxito internacional.</p>

          <div class="btn-row">
            <button class="btn" data-action="check">Comprobar</button>
            <button class="btn secondary" data-action="reset">Reiniciar</button>
          </div>
          <div class="feedback" aria-live="polite"></div>
        </div>
      </div>
    </article>
  </section>

  <section class="grid" aria-label="Ejercicios autocorregibles 2">
    <article class="card">
      <div class="card-h">
        <h3>Ejercicio 3 · Empareja evento y año</h3>
        <span class="pill">Autocorregible</span>
      </div>
      <div class="card-b">
        <div class="exercise" data-ex="match">
          <b>Selecciona el año correcto</b>
          <div class="match-grid">
            <div class="story">
              <p><mark>Se consolidó</mark> la estética de la Movida en el cine.</p>
              <select class="input" data-answer="1984">
                <option value="">— elige —</option>
                <option>1979</option>
                <option>1984</option>
                <option>1986</option>
              </select>
            </div>
            <div class="story">
              <p><mark>Se abrieron</mark> nuevos espacios culturales.</p>
              <select class="input" data-answer="1979">
                <option value="">— elige —</option>
                <option>1986</option>
                <option>1979</option>
                <option>1981</option>
              </select>
            </div>
            <div class="story">
              <p><mark>La cultura pop</mark> se internacionalizó.</p>
              <select class="input" data-answer="1986">
                <option value="">— elige —</option>
                <option>1986</option>
                <option>1979</option>
                <option>1984</option>
              </select>
            </div>
            <div class="story">
              <p><mark>Surgieron</mark> revistas alternativas.</p>
              <select class="input" data-answer="1981">
                <option value="">— elige —</option>
                <option>1981</option>
                <option>1986</option>
                <option>1979</option>
              </select>
            </div>
          </div>

          <div class="btn-row">
            <button class="btn" data-action="check">Comprobar</button>
            <button class="btn secondary" data-action="reset">Reiniciar</button>
          </div>
          <div class="feedback" aria-live="polite"></div>
        </div>
      </div>
    </article>

    <article class="card">
      <div class="card-h">
        <h3>Ejercicio 4 · Narración guiada</h3>
        <span class="pill">Autocorregible</span>
      </div>
      <div class="card-b">
        <div class="exercise" data-ex="reorder">
          <b>Ordena la mini-historia</b>
          <p class="muted">Escribe el orden correcto (1–4) en cada frase.</p>
          <div class="options">
            <label class="option">1) <input class="input" data-answer="2" placeholder="nº" aria-label="Orden 1"> La música explotó en los barrios.</label>
            <label class="option">2) <input class="input" data-answer="1" placeholder="nº" aria-label="Orden 2"> La transición terminó y el ambiente cambió.</label>
            <label class="option">3) <input class="input" data-answer="4" placeholder="nº" aria-label="Orden 3"> La Movida inspiró a nuevos cineastas.</label>
            <label class="option">4) <input class="input" data-answer="3" placeholder="nº" aria-label="Orden 4"> Los locales nocturnos abrieron hasta tarde.</label>
          </div>

          <div class="btn-row">
            <button class="btn" data-action="check">Comprobar</button>
            <button class="btn secondary" data-action="reset">Reiniciar</button>
          </div>
          <div class="feedback" aria-live="polite"></div>
        </div>
      </div>
    </article>
  </section>

  <section class="card" aria-label="Autoevaluación">
    <div class="card-h">
      <h3>Autoevaluación final</h3>
      <span class="pill">Checklist</span>
    </div>
    <div class="card-b">
      <div class="score-box">
        <div>
          <b>¿Puedes narrar un hecho cultural en indefinido?</b>
          <p class="muted">Ejemplo: “En 1986, la escena pop <b>se internacionalizó</b>”.</p>
        </div>
      </div>
      <div class="chip-row" style="margin-top:12px;">
        <span class="chip">Ayer / en 1984 / entonces</span>
        <span class="chip">Acciones completas</span>
        <span class="chip">Narraciones históricas</span>
      </div>
      <p class="footer">Consejo: combina indefinido con imperfecto para dar fondo y detalles.</p>
    </div>
  </section>

  <script>
    const exercises = document.querySelectorAll('.exercise');

    const normalize = (value) => value.trim().toLowerCase();

    exercises.forEach((ex) => {
      const feedback = ex.querySelector('.feedback');
      const inputs = ex.querySelectorAll('[data-answer]');

      ex.addEventListener('click', (event) => {
        const action = event.target.getAttribute('data-action');
        if (!action) return;

        if (action === 'reset') {
          inputs.forEach((input) => {
            if (input.tagName === 'SELECT') input.value = '';
            else input.value = '';
            input.style.borderColor = 'var(--line)';
          });
          feedback.textContent = '';
          return;
        }

        if (action === 'check') {
          let correct = 0;
          inputs.forEach((input) => {
            const expected = normalize(input.getAttribute('data-answer'));
            const value = normalize(input.value);
            const isCorrect = value === expected && value !== '';
            input.style.borderColor = isCorrect ? 'var(--success)' : 'var(--danger)';
            if (isCorrect) correct += 1;
          });

          const total = inputs.length;
          if (correct === total) {
            feedback.innerHTML = `<span class="ok">¡Perfecto!</span> ${correct}/${total} correctas.`;
          } else {
            feedback.innerHTML = `<span class="bad">Revisa:</span> ${correct}/${total} correctas.`;
          }
        }
      });
    });
  </script>
</div>
